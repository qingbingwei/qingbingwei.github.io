<!doctype html>
<html lang="en">
  <head>
    <title>数据库的增删改查 // 清兵卫的博客</title>
    <link rel="shortcut icon" href="/favicon.ico" />
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.117.0">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="qingbingwei" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="/css/main.min.3c3c186cd62e563ad6e2f00a89dbee656ab912d1d46f856b5605dd0232521e2a.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="数据库的增删改查"/>
<meta name="twitter:description" content="-- 创建数据库 CREATE DATABASE IF NOT EXISTS exercise DEFAULT CHARACTER SET UTF8 COLLATE UTF8_GENERAL_CI; -- 使用数据库 USE exercise; -- 创建数据表 CREATE TABLE IF NOT EXISTS stu_course( `number` INT(11) AUTO_INCREMENT PRIMARY KEY NOT NULL COMMENT &#39;课程编号&#39;, name VARCHAR(20) NOT NULL COMMENT &#39;课程名称&#39;, score DOUBLE(5,2) NOT NULL COMMENT &#39;学分&#39; ) ENGINE=InnoDB CHARSET=UTF8 COMMENT=&#39;课程表&#39;; -- 修改数据表 ALTER TABLE stu_course RENAME AS course; -- 增加字段 ALTER TABLE course ADD `time` INT(3) NOT NULL COMMENT &#39;学时&#39;; -- 修改字段 ALTER TABLE course MODIFY score DOUBLE(3,1) NOT NULL COMMENT &#39;学分&#39;; DML语句（Data Mainpulation Language）:数据操作语言，对数据操作，而非数据表 INSERT语句 -- 需要注意，VALUES后的字段值必须与表名后的字段名一一对应 INSERT INTO 表名(字段名1,字段名2."/>

    <meta property="og:title" content="数据库的增删改查" />
<meta property="og:description" content="-- 创建数据库 CREATE DATABASE IF NOT EXISTS exercise DEFAULT CHARACTER SET UTF8 COLLATE UTF8_GENERAL_CI; -- 使用数据库 USE exercise; -- 创建数据表 CREATE TABLE IF NOT EXISTS stu_course( `number` INT(11) AUTO_INCREMENT PRIMARY KEY NOT NULL COMMENT &#39;课程编号&#39;, name VARCHAR(20) NOT NULL COMMENT &#39;课程名称&#39;, score DOUBLE(5,2) NOT NULL COMMENT &#39;学分&#39; ) ENGINE=InnoDB CHARSET=UTF8 COMMENT=&#39;课程表&#39;; -- 修改数据表 ALTER TABLE stu_course RENAME AS course; -- 增加字段 ALTER TABLE course ADD `time` INT(3) NOT NULL COMMENT &#39;学时&#39;; -- 修改字段 ALTER TABLE course MODIFY score DOUBLE(3,1) NOT NULL COMMENT &#39;学分&#39;; DML语句（Data Mainpulation Language）:数据操作语言，对数据操作，而非数据表 INSERT语句 -- 需要注意，VALUES后的字段值必须与表名后的字段名一一对应 INSERT INTO 表名(字段名1,字段名2." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://qingbingwei.github.io/post/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9A%84%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5/" /><meta property="article:section" content="post" />
<meta property="article:published_time" content="2024-02-08T10:56:40+08:00" />
<meta property="article:modified_time" content="2024-02-08T10:56:40+08:00" />


  </head>
  <body>
    <header class="app-header">
      <a href="https://qingbingwei.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="qingbingwei" /></a>
      <span class="app-header-title">清兵卫的博客</span>
      <nav class="app-header-menu">
          <a class="app-header-menu-item" href="/">Home</a>
             - 
          
          <a class="app-header-menu-item" href="/tags/">Tags</a>
             - 
          
          <a class="app-header-menu-item" href="/about/">About</a>
      </nav>
      <p>这里是清兵卫的博客，用于记录生活日常，代码存储于GitHub上</p>
      <div class="app-header-social">
        
          <a href="https://github.com/qingbingwei" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-github">
  <title>Github</title>
  <path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"></path>
</svg>
          </a>
        
          <a href="https://twitter.com/gohugoio" target="_blank" rel="noreferrer noopener me">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-twitter">
  <title>Twitter</title>
  <path d="M23 3a10.9 10.9 0 0 1-3.14 1.53 4.48 4.48 0 0 0-7.86 3v1A10.66 10.66 0 0 1 3 4s-4 9 5 13a11.64 11.64 0 0 1-7 2c9 5 20 0 20-11.5a4.5 4.5 0 0 0-.08-.83A7.72 7.72 0 0 0 23 3z"></path>
</svg>
          </a>
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">数据库的增删改查</h1>
      <div class="post-meta">
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Feb 8, 2024
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          4 min read
        </div>
        <div>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tag">
  <title>tag</title>
  <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"></path><line x1="7" y1="7" x2="7.01" y2="7"></line>
</svg>
              <a class="tag" href="https://qingbingwei.github.io/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/">数据库</a>
        </div>
      </div>
    </header>
    <div class="post-content">
      <pre><code>-- 创建数据库
CREATE DATABASE IF NOT EXISTS exercise DEFAULT CHARACTER SET UTF8 COLLATE UTF8_GENERAL_CI;
-- 使用数据库
USE exercise;
-- 创建数据表
CREATE TABLE IF NOT EXISTS stu_course(
    `number` INT(11) AUTO_INCREMENT PRIMARY KEY NOT NULL COMMENT '课程编号',
    name VARCHAR(20) NOT NULL COMMENT '课程名称',
    score DOUBLE(5,2) NOT NULL COMMENT '学分'
) ENGINE=InnoDB CHARSET=UTF8 COMMENT='课程表';
-- 修改数据表
ALTER TABLE stu_course RENAME AS course;
-- 增加字段
ALTER TABLE course ADD `time` INT(3) NOT NULL COMMENT '学时';
-- 修改字段
ALTER TABLE course MODIFY score DOUBLE(3,1) NOT NULL COMMENT '学分';


DML语句（Data Mainpulation Language）:数据操作语言，对数据操作，而非数据表

INSERT语句
-- 需要注意，VALUES后的字段值必须与表名后的字段名一一对应
INSERT INTO 表名(字段名1,字段名2.....字段名n) VALUES (字段值1,字段值2.....字段值n);
INSERT INTO course(`number`,name,score,`time`) VALUES (1,'MySQL基础',4,40);
-- 需要注意，VALUES后的字段值必须与创建表时的字段顺序一一对应
INSERT INTO 表名 VALUES (字段值1,字段值2.....字段值n);
INSERT INTO course VALUES (2,'c++基础',3,20);
-- 一次性插入多条数据
INSERT INTO 表名(字段名1,字段名2.....字段名n) VALUES (字段值1,字段值2.....字段值n),...,(字段值1,字段值2.....字段值n);
INSERT INTO 表名 VALUES (字段值1,字段值2.....字段值n),...,(字段值1,字段值2.....字段值n);

UPDATE语句
    1.WHERE条件子句
    AND &lt;----&gt; &amp;&amp;
    OR  &lt;----&gt; ||
    WHERE time &gt; 20 AND time &lt; 40;
    2.UPDATE语句
    -- 将MySQL基础学分改为3，学时改为30
    UPDATE course SET score=3,`time`=30 WHERE name='MySQL基础'; 
DELETE语句
--
DELETE FROM 表名 [WHERE 删除条件]
-- 删除课程表中编号为一的数据
DELETE FROM course WHERE `number`=1; 

TRUNCATE语句
-- 清空表中数据
TRUNCATE [TABLE] course;

TRUNCATE语句和DELETE语句区别
    1.DELETE语句根据条件删除表中数据,而TRUNCATE语句则是清空表中数据,如果DELETE语句要删除表中所有数据,那么在效率上要低于TRUNCATE语句
    2.如果表中有自增长列,TRUNCATE语句会重置自增长计数器,但DELETE语句不会
    3.TRUNCATE语句执行后,数据无法恢复,而DELETE语句执行后,可以使用事务回滚进行恢复
-- 当列为自增长列或者有默认值时，可以不给该列赋值
INSERT INTO course(name,score,`time`) VALUES ('MySQL提高',4,40);




-- 创建数据库
CREATE DATABASE IF NOT EXISTS exercise DEFAULT CHARACTER SET UTF8 COLLATE UTF8_GENERAL_CI;
-- 使用数据库
USE exercise;
-- 创建数据表
CREATE TABLE IF NOT EXISTS stu_course(
    `number` INT(11) AUTO_INCREMENT PRIMARY KEY NOT NULL COMMENT '课程编号',
    name VARCHAR(20) NOT NULL COMMENT '课程名称',
    score DOUBLE(5,2) NOT NULL COMMENT '学分'
) ENGINE=InnoDB CHARSET=UTF8 COMMENT='课程表';
-- 修改数据表
ALTER TABLE stu_course RENAME AS course;
-- 增加字段
ALTER TABLE course ADD `time` INT(3) NOT NULL COMMENT '学时';
-- 修改字段
ALTER TABLE course MODIFY score DOUBLE(3,1) NOT NULL COMMENT '学分';


DQL语句（Data Query Language）:数据查询语言

SELECT语句
SELECT ALL/DISTINCT * | 字段名1 AS 别名1[字段名1 AS 别名1,...,字段名n AS 别名n] FROM 表名 WHERE 查询条件

ALL表示查询所有满足条件的记录，可以省略;DISTINCT表示去掉查询结果中重复的记录;
AS可以给数据列，数据表起一个别名(AS可以省略)
-- 从课程表中查询课程编号小于2的课程名称
SELECT name FROM course WHERE `number`&lt;2;
-- 从课程表中查询课程名称为&quot;c++基础&quot;的学分和学时
SELECT score,`time` FROM course WHERE name='c++基础';
-- 列的别名
SELECT score AS '学分',`time` AS '学时' FROM course WHERE name='c++基础';
-- 表的别名
SELECT c.name '课程名称',c.score '学分',c.time '学时' FROM course c WHERE c.name='c++基础';

比较操作符
IS NULL  字段名 IS NULL  如果字段值为NULL,则条件满足
IS NOT NULL 字段名 IS NOT NULL 如果字段值不为NULL,则条件满足
BETWEEN...AND  字段名 BETWEEN 最小值 AND 最大值 如果字段值在最大值和最小值之间,则条件满足
LIKE 字段名 LIKE '%匹配内容%' 如果字段值包含匹配内容,则条件满足
IN 字段名 IN(值1,值2,...,值n) 如果字段值在值1,值2,...,值n中,则条件满足

SELECT * FROM course WHERE name IS NOT NULL;

SELECT * FROM course WHERE score BETWEEN 2 AND 3;
-- 查询课程名包含SQL的课程
SELECT * FROM course WHERE name LIKE '%SQL%';
-- 查询课程名以SQL结尾的课程
SELECT * FROM course WHERE name LIKE '%SQL';
-- 查询课程名以SQL开始的课程
SELECT * FROM course WHERE name LIKE 'SQL%';
-- 查询课程名只有七个字符的课程
SELECT * FROM course WHERE name LIKE '_______';
-- 查询课程名以M开始且只有七个字符的课程
SELECT * FROM course WHERE name LIKE 'M______';
-- 从课程表查询课程编号为2，3的课程信息
SELECT * FROM course WHERE `number` IN(2,3);

-- 新建一个学生表
DROP TABLE IF EXISTS student;
CREATE TABLE student(
    id BIGINT(20) AUTO_INCREMENT NOT NULL PRIMARY KEY COMMENT '学号，主键',
    name VARCHAR(20) NOT NULL COMMENT '姓名',
    sex VARCHAR(2) DEFAULT '男' COMMENT '性别',
    age INT(3) DEFAULT 0 COMMENT '年龄',
    score DOUBLE(5,2) COMMENT '成绩'
)ENGINE=InnoDB CHARSET=UTF8 COMMENT='学生表'; 
-- 插入测试数据
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '张三', '男', 20,59);
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '李四', '女', 19,62);
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '王五', '其他',21, 62);
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '龙华', '男', 22,75);
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '金凤', '女', 18,80);
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '张华', '其他',27, 88);
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '李刚', '男', 30,88);
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '潘玉明', '女',28, 81);
INSERT INTO student(id, name, sex, age, score) VALUES (DEFAULT, '凤飞飞', '其他',32, 90);

分组查询
SELECT ALL/DISTINCT * | 字段名1 AS 别名1[字段名1 AS 别名1,...,字段名n AS 别名n] FROM 表名 
WHERE 查询条件 GROUP BY 字段名1,...,字段名n;
-- 从学生表查询成绩在80分以上的学生信息并按性别分组
SELECT * FROM student WHERE score&gt;80 GROUP BY sex;
-- 注意:分组查询所得的结果只是该组中的第一条数据
-- 从学生表查询成绩在60~80之间的学生信息并按性别和年龄分组
SELECT * FROM student WHERE score BETWEEN 60 AND 80 GROUP BY sex,age;

聚合函数
1.COUNT():统计满足条件的数据总条数
-- 从学生表查询成绩在80分以上的学生人数
SELECT COUNT(*) FROM student WHERE score&gt;80;
-- 给COUNT(*)取一个别名
SELECT COUNT(*) tatal FROM student WHERE score&gt;80;
2.SUM():只能用于数值类型的字段或者表达式，计算该满足条件的字段值的总和
-- 从学生表查询不及格的学生人数和总成绩
SELECT COUNT(*) tatalCount,SUM(score) tatalScore FROM student WHERE score&lt;60;
3.AVG():只能用于数值类型的字段或者表达式，计算该满足条件的字段值的平均值
-- 从学生表查询男生、女生、其他类型的学生的平均成绩
SELECT sex,AVG(score) avgScore FROM student GROUP BY sex;
4.MAX():只能用于数值类型的字段或者表达式，计算该满足条件的字段值的最大值
-- 从学生表查询学生的最大年龄
SELECT MAX(age) FROM student;
5.MIN():只能用于数值类型的字段或者表达式，计算该满足条件的字段值的最小值
-- 从学生表查询学生的最低分
SELECT MIN(score) FROM student;

分组查询结果筛选
SELECT ALL/DISTINCT * | 字段名1 AS 别名1[字段名1 AS 别名1,...,字段名n AS 别名n] FROM 表名 
WHERE 查询条件 GROUP BY 字段名1,...,字段名n HAVING 筛选条件;
-- 从学生表查询年龄在20~30之间的学生信息并按性别分组，找出组内平均分在74分以上的组
SELECT * FROM student WHERE age BETWEEN 20 AND 30 GROUP BY SEX HAVING AVG(score)&gt;74;
-- 注：分组后如果还需要满足其他条件，则需要使用HAVING实现

排序
SELECT ALL/DISTINCT * | 字段名1 AS 别名1[,字段名1 AS 别名1, ..., 字段名n AS 别名n]
FROM 表名 WHERE 查询条件 ORDER BY 字段名1 ASC|DESC,字段名2 ASC|DESC,..., 字段名n
ASC|DESC
-- 注：ASC为升序，DESC为降序
-- 从学生表查询年龄在18~30岁之间的学生信息并按成绩从高到低排列，如果成绩相同，则按年龄从小到大排列
SELECT * FROM student WHERE age BETWEEN 18 AND 30 ORDER BY score DESC,age ASC;
-- 注:ORDER BY 必须位于 WHERE 条件之后 

分页
SELECT ALL/DISTINCT * | 字段名1 AS 别名1[,字段名1 AS 别名1, ..., 字段名n AS 别名n]
FROM 表名 WHERE 查询条件 LIMIT 偏移量, 查询条数;
-- 从学生表分页查询成绩及格的学生信息，每页显示3条，查询第2页学生信息
SELECT * FROM student WHERE score&gt;=60 LIMIT 3,3;
-- LIMIT的第一个参数表示偏移量，也就是跳过的行数
-- LIMIT的第二个参数表示查询返回最大行数，可能没有给定数量那么多行
-- 注：如果一个查询中包含分组、排序和分页，那么它们之间必须按照分组-&gt;排序-&gt;分页的先后顺序排列。
</code></pre>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
